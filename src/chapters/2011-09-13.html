<h1>The Unix object model (as seen from user space)</h1>
<p>If you're a Rubyist, you may already be familiar with object-oriented
designs.  A running Unix/Unix-like kernel exposes two primary types of
objects to userspace:</p>

<pre><code>1) Processes
2) Open files
</code></pre>

<h2>Processes</h2>

<p>Processes are instances of running applications.  Ruby programs
typically run as their own process[1] in userspace.  Kernels expose
a Process IDentifier (PID) as positive integers to userspace programs
to uniquely identify processes.</p>

<p>Each PID represents one (private) process object in the OS kernel.  The
PID is only a reference or pointer to that object.  Two running
processes cannot have the same PID, and two PIDs cannot refer to the
same process, but PIDs can be recycled and reused over time.</p>

<p>PIDs are global in scope to each running Unix system.</p>

<p>Processes are created from its parent using the fork(2) system call
(which is wrapped by the Kernel#fork method in Ruby).</p>

<p>We will cover processes more in later chapters/posts.</p>

<p>[1] although experimental Multi-VM implementations exist that allow
    multiple Ruby VMs within a single process</p>

<h2>Open Files</h2>

<p>Running processes may create, open, and release objects known as &quot;files&quot;
in kernel space using APIs provided in user space.  Much of Unix systems
programming revolves around manipulating &quot;file&quot; objects of various
types.</p>

<p>The kernel exposes non-negative integers known as &quot;file descriptors&quot; to
userspace.  These are similar to PIDs as they are integers which point
to objects within the kernel.</p>

<p>You may have heard the term: &quot;everything is a file&quot; in Unix literature.</p>

<p>Indeed, each integer file descriptor may refer to one of several types
of objects within a running kernel.  All of these objects can be called
&quot;files&quot; even if they're not stored on hard disks or visible on the
filesystem.</p>

<p>File descriptors may be reused and recycled within the lifetime a
process.  They are more frequently recycled than PIDs.</p>

<p>Each process has its own file descriptor table (inherited from its
parent).</p>

<p>Unlike PIDs, several file descriptors may refer to the same file
object inside the kernel.</p>

<p>File descriptors have properties of their own that are not tied
to the underlying file object in the kernel.</p>

<p>As open files are the primary interface for processes to interact with
the kernel, I expect the majority of my future posts to cover various
aspects of file manipulation in-depth.</p>

<h2>Summary</h2>

<p>Processes are containers for open files (among other things).  Open
files are objects in the Unix kernel that can be accessed from within
processes.</p>

<p>License: GPLv3 (or later, at the discretion of Eric Wong)</p>

<h2>         http://www.gnu.org/licenses/gpl-3.0.txt</h2>

<p>Eric Wong</p>
